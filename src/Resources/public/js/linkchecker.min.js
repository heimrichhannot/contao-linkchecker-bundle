(function(){function a(a,b){if(this.element=a,this.options=b,this.url=this.element.getAttribute("data-url"),this.element.linkchecker=this,this.element.getAttribute("data-target")&&(this.target=document.querySelector(this.element.getAttribute("data-target"))),"undefined"==this.target)return!1;this.url||(this.url=window.location.href);var c={};this.url.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,b,d){c[b]=void 0!==d?d:""}),this.params=c}var a,b=[];a.prototype.test=function(){return function(a){return new Promise(function(c,d){method="post",url=a.element.getAttribute("data-url");var e=new XMLHttpRequest;e.open(method,url,!0),e.withCredentials=!!a.options.withCredentials,response=null,updateProgress=function(){return function(a){}},e.onload=function(){var b;if(4!==e.readyState&&d({status:this.status,statusText:e.statusText}),response=e.responseText,e.getResponseHeader("content-type")&&~e.getResponseHeader("content-type").indexOf("application/json"))try{response=JSON.parse(response)}catch(a){response="Invalid JSON response from server."}200<=(b=e.status)&&b<300?(a._finished(response),c(e.response)):d({status:this.status,statusText:e.statusText})},e.onerror=function(){d({status:this.status,statusText:e.statusText})},progressObj=null!=(_ref=e.upload)?_ref:e,progressObj.onprogress=updateProgress,headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},a.options.headers&&extend(headers,a.options.headers);for(headerName in headers)headerValue=headers[headerName],headerValue&&e.setRequestHeader(headerName,headerValue);if(formData=new FormData,a.params){_ref1=a.params;for(key in _ref1)value=_ref1[key],formData.append(key,value)}b.push(e),a.submitRequest(e,formData)})}(this)},a.prototype.submitRequest=function(a,b){a.send(b)},a.prototype._finished=function(a){return"undefined"!=typeof a.result&&"html"in a.result?(this.target.innerHTML=a.result.html,!0):(this.target.innerHTML="-",!1)},LinkCheckerRegistry={init:function(){this.register()},abort:function(){this.stopRecursion=!0},runRecursiveFunction:function(a,arguments,b){if(arguments.length<1)return void("undefined"!=typeof b&&b());var c=arguments[0],d=Array.prototype.slice.call(arguments,1);a(c,d,b)},register:function(){var d=document.querySelectorAll("[data-linkchecker]"),e={};!function(c){function f(d,g,h){if(c.stopRecursion)for(var i=0,j=b.length;i<j;i++){var k=b[i];k.abort()}else{if("undefined"!=typeof d.linkchecker)return void c.runRecursiveFunction(f,g,h);var l=new a(d,e);l.test().then(function(){c.runRecursiveFunction(f,g,h)}).catch(function(a){c.runRecursiveFunction(f,g,h)})}}c.runRecursiveFunction(f,d)}(this)}},window.jQuery&&(jQuery(document).ready(function(){LinkCheckerRegistry.init()}),jQuery(document).ajaxComplete(function(){LinkCheckerRegistry.init()}),jQuery(window).on("beforeunload",function(){LinkCheckerRegistry.abort()})),window.MooTools&&(window.addEvent("domready",function(){LinkCheckerRegistry.init()}),window.addEvent("ajax_change",function(){LinkCheckerRegistry.init()}),window.addEvent("beforeunload",function(){LinkCheckerRegistry.abort()}))}).call(this);